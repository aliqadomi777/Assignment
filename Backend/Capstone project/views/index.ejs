<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog App</title>
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body>
    <%- include('partials/header') %>

    <main class="container">
      <div class="posts-container">
        <h2>Recent Posts</h2>

        <% if (posts.length === 0) { %>
        <div class="empty-state">
          <p>No posts yet. <a href="/posts/new">Create your first post!</a></p>
        </div>
        <% } else { %> <% posts.forEach(post => { %>
        <article class="post-card">
          <h3><%= post.title %></h3>
          <div class="post-meta">
            <span class="date"
              >Posted on: <%= post.createdAt.toLocaleDateString() %></span
            >
            <% if (post.updatedAt) { %>
            <span class="date"
              >(Updated: <%= post.updatedAt.toLocaleDateString() %>)</span
            >
            <% } %>
          </div>
          <div class="post-content">
            <p><%= post.content %></p>
          </div>
          <div class="post-actions">
            <a href="/posts/<%= post.id %>/edit" class="btn btn-edit">Edit</a>
            <form
              action="/posts/<%= post.id %>/delete"
              method="POST"
              class="inline-form"
            >
              <button type="submit" class="btn btn-delete">Delete</button>
            </form>
          </div>
        </article>
        <% }) %> <% } %>
      </div>
    </main>
  </body>
</html>
